name: CI
on:
 workflow_dispatch

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
        - name: Run a one-line script
          run: echo Hello, world!

  deploy-dev:
    runs-on: ubuntu-latest
    environment:
      name: dev
      url: 'nascimento.com' 
    needs: build
    steps:
        - name: Run a one-line script
          run: echo Deploy Dev
        - name: 'Deploy to Azure WebApp'
          uses: azure/webapps-deploy@v2
          with:
            app-name: ${{ env.AZURE_WEBAPP_NAME }}
            publish-profile: ${{ secrets.AZURE_WEBAPP_PUBLISH_PROFILE }}
            package: ${{ env.AZURE_WEBAPP_PACKAGE_PATH }}
          
  deploy-stage:
    runs-on: ubuntu-latest
    environment:
      name: stage
      url: 'nascimento.com' 
    needs: deploy-dev
    steps:
        - name: Run a one-line script
          run: echo Deploy Prod
          
  deploy-prod:
    runs-on: ubuntu-latest
    environment:
      name: prod
      url: 'nascimento.com' 
    needs: deploy-stage
    steps:
        - name: Run a one-line script
          run: echo Deploy Stage
          
          
     
          
